<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{asset('css/index.css')}}">
    <link rel="stylesheet" href="{{asset('css/exploitant/exploitant.css')}}">
    <!-- <link rel="stylesheet" href="{{asset('css/datatables/datatables.min.css')}}"> -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
    <!-- <script src="{{asset('js/datatables/datatables.js')}}"></script>
    <script src="{{asset('js/datatables/datatables.min.js')}}"></script> -->
    <title>Document</title>
</head>
<body>
    <div class="main">
        @include('menubar/menu')
      <div class="body">
      <div style="background-color: #f2f2f2;padding: 10px 20px;">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <!-- Left navbar links -->
  <ul class="navbar-nav">
    <li class="nav-item d-none d-sm-inline-block">
     <button type="button" class="btn btn-primary" id="show-popup"> 
     <i class="fa fa-user-plus fa-xs"></i>
        ajouter
     </button>
    </li>
  </ul>

  
  <ul class="collapse navbar-collapse justify-content-center ">
    <li class="nav-item d-none d-sm-inline-block">
        Accueil
    </li>
  </ul>
  <!-- Right navbar links -->
  <ul class="navbar-nav ml-auto">
    <!-- Messages Dropdown Menu -->
    <li class="nav-item dropdown">
       <a href="#"><button type="button" class="btn btn-danger"><i class="fa fa-sign-out-alt"></i> Deconnecter</button></a>
    </li>
    <!-- Notifications Dropdown Menu -->
  </ul>
 </nav>
<!-- /.navbar -->  
</div>
       

       <!-- pop up modif -->
       <div class="popup1">
        <a href="{{route('exploitant')}}"><div class="close-btn1">&times;</div></a>
         <form action="{{route('exploitant.edit')}}" method ="post">
            @csrf
            @method('PUT')
         <div class="form">
            <h2>Formulaire de modification</h2>
            <div class="form-element">
                <label for="nom">Nom</label>
                <input type="text" name="exploitant_nom" placeholder="nom" value="{{$dataEdit->exploitant_nom}}" required>
            </div>
            <div class="form-element">
                <label for="cin">CIN</label>
                <input type="number" name="cin" placeholder="cin" value="{{$dataEdit->cin}}" required>
            </div>       
            <div class="form-element">
                <label for="lieu">Lieu</label>
                <input type="text" name="lieu" placeholder="lieu" value="{{$dataEdit->lieu}}" required>
            </div> 

            <input type="hidden" name="id" placeholder="lieu" value="{{$dataEdit->id}}" required>

            <div class="form-element">
                <button>modifier</button>
            </div>
        </div>
        </form>
       </div>
       
       <!-- pop up edit -->
       <!-- @if(session('error'))
       <div class="popup1">
         <div class="close-btn1">&times;</div>
         <form action="{{route('exploitant.store')}}" method ="post">
            @csrf
         <div class="form">
            <h2>modification d'un exploitant</h2>
            <div class="form-element">
                <label for="nom">Nom</label>
                <input type="text" name="exploitant_nom" placeholder="nom" required>
            </div>
            <div class="form-element">
                <label for="cin">CIN</label>
                <input type="number" name="cin" placeholder="cin" required>
            </div>       
            <div class="form-element">
                <label for="lieu">Lieu</label>
                <input type="text" name="lieu" placeholder="lieu" required>
            </div> 
            <div class="form-element">
                <button>Modifer</button>
            </div>
        </div>
        </form>
       </div>
       @endif  -->
       <br>
       <div class="mytable">
        @if(session('success'))
       <div class = "alert alert-success auto-close">{{session('success')}}</div>
        @endif
        @if(session('error'))
       <div class = "alert alert-warning auto-close">{{session('error')}}</div>
        @endif
       <table id="example" class="table table-striped" style="width:100%">
        <thead>
            <tr>
                <th>Nom</th>
                <th>CIN</th>
                <th>Lieu</th>
                <th>action</th>
                
            </tr>
        </thead>
        <tbody>
            @foreach($data as $key => $val)
            <tr>
                <td>{{$val->exploitant_nom}}</td>
                <td>{{$val->cin}}</td>
                <td>{{$val->lieu}}</td>
                <td>
                    <a href="#"><button type="button" id="show-popup1" class="btn btn-warning"><i class="fa fa-file-pen"></i></button></a>
                    <a href="#"><button type="button" class="btn btn-danger"><i class="fa fa-trash-can"></i></button></a>
                </td>
            @endforeach
            </tr>
            
        </tbody>

        </table>   
       </div>
      </div>
      
    </div>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script>
     $(document).ready(function() {
    $('#example').DataTable({
        language: {
            url: '//cdn.datatables.net/plug-ins/1.13.6/i18n/fr-FR.json'
        }
    });
});
    </script>
    
    <!-- add -->
    <script>
    document.querySelector("#show-popup").addEventListener("click", function(){
        document.querySelector(".popup").classList.add("active");
    });
    document.querySelector(".close-btn").addEventListener("click", function(){
        document.querySelector(".popup").classList.remove("active");
    });  
    </script>
    <!-- edit -->
    <!-- <script>
    document.querySelector("#show-popup1").addEventListener("click", function(){
        document.querySelector(".popup1").classList.add("active1");
    });
    document.querySelector(".close-btn1").addEventListener("click", function(){
        document.querySelector(".popup1").classList.remove("active1");
    });  
    </script> -->
<script>
    // Sélectionnez l'élément avec la classe 'auto-close' et masquez-le après 5 secondes
    setTimeout(function() {
        var autoCloseElement = document.querySelector('.auto-close');
        if(autoCloseElement) {
            autoCloseElement.style.display = 'none';
        }
    }, 5000); // 5000 millisecondes = 5 secondes
</script>
</body>
</html>